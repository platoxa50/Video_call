<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoChat Pro - –û–±—â–µ–Ω–∏–µ —Å –¥—Ä—É–∑—å—è–º–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: #1a1a2e;
            color: white;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #2d2d44;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #4cc9f0;
        }
        
        .subtitle {
            color: #a5b4cb;
            font-size: 1.1rem;
        }
        
        .setup-panel {
            background: #16213e;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .setup-panel h2 {
            margin-bottom: 20px;
            color: #4cc9f0;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #a5b4cb;
        }
        
        input, button, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 5px;
            border: none;
            font-size: 16px;
        }
        
        input {
            background: #0f3460;
            color: white;
            border: 1px solid #2d2d44;
        }
        
        button {
            background: #4361ee;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            background: #3a56d4;
        }
        
        button:disabled {
            background: #555;
            cursor: not-allowed;
        }
        
        button.secondary {
            background: #f72585;
        }
        
        button.secondary:hover {
            background: #e01e75;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        @media (min-width: 900px) {
            .app-container {
                flex-direction: row;
            }
        }
        
        .video-section {
            flex: 2;
            background: #16213e;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .video-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (min-width: 768px) {
            .video-container {
                flex-direction: row;
            }
        }
        
        .video-wrapper {
            flex: 1;
            background: #0f3460;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            min-height: 250px;
            border: 2px solid #2d2d44;
        }
        
        .video-wrapper video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: #000;
        }
        
        .video-label {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .video-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 20px;
            border-radius: 5px;
            border: none;
            background: #0f3460;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s;
        }
        
        .control-btn:hover {
            background: #1a3a6e;
        }
        
        .control-btn.active {
            background: #4361ee;
        }
        
        .control-btn.end-call {
            background: #f72585;
        }
        
        .control-btn.end-call:hover {
            background: #e01e75;
        }
        
        .chat-section {
            flex: 1;
            background: #16213e;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            max-height: 600px;
        }
        
        .chat-header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2d2d44;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
            padding-right: 10px;
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: #0f3460;
            border-radius: 10px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: #4361ee;
            border-radius: 10px;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .message.sent {
            background: #4361ee;
            margin-left: auto;
            border-bottom-right-radius: 0;
        }
        
        .message.received {
            background: #0f3460;
            border-bottom-left-radius: 0;
        }
        
        .message-info {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 5px;
            border: none;
            background: #0f3460;
            color: white;
        }
        
        .send-btn {
            padding: 12px 20px;
            background: #4361ee;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .status.connected {
            background: rgba(67, 97, 238, 0.2);
            color: #4cc9f0;
        }
        
        .status.disconnected {
            background: rgba(247, 37, 133, 0.2);
            color: #f72585;
        }
        
        .hidden {
            display: none;
        }
        
        .logs {
            background: #0f172a;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid #1e293b;
        }
        
        .log-time {
            color: #4cc9f0;
        }
        
        .log-message {
            color: #e2e8f0;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #2d2d44;
            color: #a5b4cb;
            font-size: 0.9rem;
        }
        
        .instructions {
            background: #0f3460;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .instructions h3 {
            margin-bottom: 10px;
            color: #4cc9f0;
        }
        
        .instructions ol {
            margin-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>VideoChat Pro</h1>
            <p class="subtitle">–ü—Ä–æ—Å—Ç–æ–µ –∏ –Ω–∞–¥–µ–∂–Ω–æ–µ –≤–∏–¥–µ–æ–æ–±—â–µ–Ω–∏–µ —Å –¥—Ä—É–∑—å—è–º–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä</p>
        </header>
        
        <div class="setup-panel" id="setupPanel">
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</h2>
            <div class="input-group">
                <label for="localPeerId">–í–∞—à ID (–¥–ª—è –¥—Ä—É–≥–∞):</label>
                <input type="text" id="localPeerId" readonly>
            </div>
            
            <div class="input-group">
                <label for="remotePeerId">ID –≤–∞—à–µ–≥–æ –¥—Ä—É–≥–∞:</label>
                <input type="text" id="remotePeerId" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –¥—Ä—É–≥–∞">
            </div>
            
            <div class="input-group">
                <label for="mediaSelect">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ–¥–∏–∞—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</label>
                <select id="mediaSelect">
                    <option value="default">–ö–∞–º–µ—Ä–∞ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                    <option value="audioOnly">–¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ (–±–µ–∑ –≤–∏–¥–µ–æ)</option>
                    <option value="screen">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞</option>
                </select>
            </div>
            
            <button id="startCallBtn">–ù–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫</button>
            <button id="copyIdBtn" class="secondary">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π ID</button>
            
            <div class="instructions">
                <h3>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
                <ol>
                    <li>–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –¥–≤—É—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö (–∏–ª–∏ –≤ –¥–≤—É—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö)</li>
                    <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ "–í–∞—à ID" —Å –æ–¥–Ω–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ "ID –≤–∞—à–µ–≥–æ –¥—Ä—É–≥–∞" –Ω–∞ –¥—Ä—É–≥–æ–º</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫" –Ω–∞ –æ–±–æ–∏—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö</li>
                    <li>–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ</li>
                </ol>
            </div>
        </div>
        
        <div class="app-container hidden" id="appContainer">
            <div class="video-section">
                <div class="video-container">
                    <div class="video-wrapper">
                        <video id="localVideo" autoplay muted playsinline></video>
                        <div class="video-label">–í—ã</div>
                    </div>
                    <div class="video-wrapper">
                        <video id="remoteVideo" autoplay playsinline></video>
                        <div class="video-label">–î—Ä—É–≥</div>
                    </div>
                </div>
                
                <div class="video-controls">
                    <button id="toggleVideoBtn" class="control-btn active">
                        <span>üé•</span> –í–∏–¥–µ–æ
                    </button>
                    <button id="toggleAudioBtn" class="control-btn active">
                        <span>üé§</span> –ê—É–¥–∏–æ
                    </button>
                    <button id="screenShareBtn" class="control-btn">
                        <span>üñ•Ô∏è</span> –≠–∫—Ä–∞–Ω
                    </button>
                    <button id="endCallBtn" class="control-btn end-call">
                        <span>üìû</span> –ó–∞–≤–µ—Ä—à–∏—Ç—å
                    </button>
                </div>
                
                <div class="status disconnected" id="connectionStatus">
                    ‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
                </div>
            </div>
            
            <div class="chat-section">
                <div class="chat-header">
                    <h3>–ß–∞—Ç</h3>
                    <span id="chatStatus">‚úÖ –û–Ω–ª–∞–π–Ω</span>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="message received">
                        <div class="message-info">–°–∏—Å—Ç–µ–º–∞ ‚Ä¢ –¢–æ–ª—å–∫–æ —á—Ç–æ</div>
                        –ß–∞—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ!
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="send-btn" id="sendMessageBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
        
        <div class="logs" id="logs">
            <div class="log-entry">
                <span class="log-time">[–°–∏—Å—Ç–µ–º–∞]:</span>
                <span class="log-message"> –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –ø—Ä–∏–º–∏—Ç–µ –∑–≤–æ–Ω–æ–∫.</span>
            </div>
        </div>
        
        <footer>
            <p>VideoChat Pro ‚Ä¢ WebRTC –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ–æ–±—â–µ–Ω–∏—è ‚Ä¢ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
            <p>–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä (Chrome, Firefox, Edge, Safari)</p>
        </footer>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        const setupPanel = document.getElementById('setupPanel');
        const appContainer = document.getElementById('appContainer');
        const localPeerIdInput = document.getElementById('localPeerId');
        const remotePeerIdInput = document.getElementById('remotePeerId');
        const startCallBtn = document.getElementById('startCallBtn');
        const copyIdBtn = document.getElementById('copyIdBtn');
        const mediaSelect = document.getElementById('mediaSelect');
        
        const localVideo = document.getElementById('localVideo');
        const remoteVideo = document.getElementById('remoteVideo');
        const toggleVideoBtn = document.getElementById('toggleVideoBtn');
        const toggleAudioBtn = document.getElementById('toggleAudioBtn');
        const screenShareBtn = document.getElementById('screenShareBtn');
        const endCallBtn = document.getElementById('endCallBtn');
        
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const connectionStatus = document.getElementById('connectionStatus');
        const logs = document.getElementById('logs');
        
        // WebRTC –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let localStream;
        let remoteStream;
        let peerConnection;
        let dataChannel;
        let isCaller = false;
        let isScreenSharing = false;
        
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è STUN —Å–µ—Ä–≤–µ—Ä–æ–≤ (–ø—É–±–ª–∏—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã Google)
        const configuration = {
            iceServers: [
                { urls: 'stun:stun.l.google.com:19302' },
                { urls: 'stun:stun1.l.google.com:19302' },
                { urls: 'stun:stun2.l.google.com:19302' },
                { urls: 'stun:stun3.l.google.com:19302' },
                { urls: 'stun:stun4.l.google.com:19302' }
            ]
        };
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π ID –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function generatePeerId() {
            return 'user-' + Math.random().toString(36).substring(2, 9);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function init() {
            const peerId = generatePeerId();
            localPeerIdInput.value = peerId;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–æ–≥
            addLog('–í–∞—à ID: ' + peerId + '. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –∏–º —Å –¥—Ä—É–≥–æ–º.');
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            startCallBtn.addEventListener('click', startCall);
            copyIdBtn.addEventListener('click', copyPeerId);
            endCallBtn.addEventListener('click', endCall);
            toggleVideoBtn.addEventListener('click', toggleVideo);
            toggleAudioBtn.addEventListener('click', toggleAudio);
            screenShareBtn.addEventListener('click', toggleScreenShare);
            sendMessageBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
        }
        
        // –ù–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫
        async function startCall() {
            const remotePeerId = remotePeerIdInput.value.trim();
            
            if (!remotePeerId) {
                alert('–í–≤–µ–¥–∏—Ç–µ ID –≤–∞—à–µ–≥–æ –¥—Ä—É–≥–∞');
                return;
            }
            
            isCaller = true;
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫ (–∫–∞–º–µ—Ä–∞+–º–∏–∫—Ä–æ—Ñ–æ–Ω –∏–ª–∏ —ç–∫—Ä–∞–Ω)
                await getLocalStream();
                
                // –°–æ–∑–¥–∞–µ–º RTCPeerConnection
                createPeerConnection();
                
                // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á–∞—Ç–∞
                createDataChannel();
                
                // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (offer) –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
                const offer = await peerConnection.createOffer();
                await peerConnection.setLocalDescription(offer);
                
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å offer –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥—Ä—É–≥—É
                // –î–ª—è –¥–µ–º–æ –º—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º –µ–≥–æ –∏ –ø–æ–ø—Ä–æ—Å–∏–º –≤—Ä—É—á–Ω—É—é –æ–±–º–µ–Ω—è—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏
                showManualExchange(offer);
                
                addLog('–°–æ–∑–¥–∞–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –¥—Ä—É–≥—É.');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∑–≤–æ–Ω–∫–∞:', error);
                addLog('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫
        async function getLocalStream() {
            const mediaType = mediaSelect.value;
            
            try {
                let stream;
                
                if (mediaType === 'screen') {
                    // –ó–∞–ø—Ä–æ—Å –Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —ç–∫—Ä–∞–Ω–∞
                    stream = await navigator.mediaDevices.getDisplayMedia({ 
                        video: true,
                        audio: true 
                    });
                    isScreenSharing = true;
                    screenShareBtn.textContent = 'üñ•Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω';
                    addLog('–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –Ω–∞—á–∞—Ç–∞');
                } else if (mediaType === 'audioOnly') {
                    // –¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ
                    stream = await navigator.mediaDevices.getUserMedia({ 
                        video: false,
                        audio: true 
                    });
                    addLog('–ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω (–±–µ–∑ –≤–∏–¥–µ–æ)');
                } else {
                    // –ö–∞–º–µ—Ä–∞ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω
                    stream = await navigator.mediaDevices.getUserMedia({ 
                        video: true,
                        audio: true 
                    });
                    addLog('–ö–∞–º–µ—Ä–∞ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω—ã');
                }
                
                localStream = stream;
                localVideo.srcObject = stream;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                setupPanel.classList.add('hidden');
                appContainer.classList.remove('hidden');
                
                return stream;
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ–¥–∏–∞—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º:', error);
                addLog('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É: ' + error.message);
                throw error;
            }
        }
        
        // –°–æ–∑–¥–∞—Ç—å RTCPeerConnection
        function createPeerConnection() {
            peerConnection = new RTCPeerConnection(configuration);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
            localStream.getTracks().forEach(track => {
                peerConnection.addTrack(track, localStream);
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
            peerConnection.ontrack = event => {
                remoteStream = event.streams[0];
                remoteVideo.srcObject = remoteStream;
                addLog('–ü–æ–ª—É—á–µ–Ω –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –æ—Ç –¥—Ä—É–≥–∞');
                updateConnectionStatus(true);
            };
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
            peerConnection.onicecandidate = event => {
                if (event.candidate) {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥—Ä—É–≥—É
                    addLog('–ù–∞–π–¥–µ–Ω ICE –∫–∞–Ω–¥–∏–¥–∞—Ç');
                }
            };
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
            peerConnection.onconnectionstatechange = () => {
                addLog('–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + peerConnection.connectionState);
                
                if (peerConnection.connectionState === 'connected') {
                    updateConnectionStatus(true);
                } else if (peerConnection.connectionState === 'disconnected' || 
                          peerConnection.connectionState === 'failed' || 
                          peerConnection.connectionState === 'closed') {
                    updateConnectionStatus(false);
                }
            };
            
            addLog('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ WebRTC —Å–æ–∑–¥–∞–Ω–æ');
        }
        
        // –°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —á–∞—Ç–∞
        function createDataChannel() {
            if (isCaller) {
                // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª, –µ—Å–ª–∏ –º—ã –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä
                dataChannel = peerConnection.createDataChannel('chat');
                setupDataChannel(dataChannel);
            } else {
                // –û–∂–∏–¥–∞–µ–º –∫–∞–Ω–∞–ª –æ—Ç –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞
                peerConnection.ondatachannel = event => {
                    dataChannel = event.channel;
                    setupDataChannel(dataChannel);
                };
            }
        }
        
        // –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞–Ω–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö
        function setupDataChannel(channel) {
            channel.onopen = () => {
                addLog('–ö–∞–Ω–∞–ª —á–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç');
                addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–ß–∞—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω. –ú–æ–∂–Ω–æ –æ–±—â–∞—Ç—å—Å—è!', 'system');
            };
            
            channel.onclose = () => {
                addLog('–ö–∞–Ω–∞–ª —á–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç');
                addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–∞—Ç–∞ –ø–æ—Ç–µ—Ä—è–Ω–æ', 'system');
            };
            
            channel.onmessage = event => {
                const data = JSON.parse(event.data);
                addChatMessage(data.sender, data.text, 'received');
            };
            
            channel.onerror = error => {
                addLog('–û—à–∏–±–∫–∞ –∫–∞–Ω–∞–ª–∞ –¥–∞–Ω–Ω—ã—Ö: ' + error);
            };
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ SDP –¥–∞–Ω–Ω—ã–º–∏
        function showManualExchange(offer) {
            const sdpData = JSON.stringify(peerConnection.localDescription);
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä
            // –î–ª—è –¥–µ–º–æ –ø–æ–∫–∞–∂–µ–º –¥–∞–Ω–Ω—ã–µ –≤ alert –∏ –ø—Ä–µ–¥–ª–æ–∂–∏–º –≤–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç
            alert(`–û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥—É:\n\n${sdpData}\n\n–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –¥—Ä—É–≥–∞, –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–∫–Ω–µ.`);
            
            // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç –¥—Ä—É–≥–∞
            const answerSdp = prompt('–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –≤–∞—à–µ–≥–æ –¥—Ä—É–≥–∞ (–æ—Ç–≤–µ—Ç/answer):');
            
            if (answerSdp) {
                try {
                    const answer = JSON.parse(answerSdp);
                    handleAnswer(answer);
                } catch (error) {
                    alert('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –¥—Ä—É–≥–∞.');
                }
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç (answer) –æ—Ç –¥—Ä—É–≥–∞
        async function handleAnswer(answer) {
            try {
                await peerConnection.setRemoteDescription(new RTCSessionDescription(answer));
                addLog('–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç –¥—Ä—É–≥–∞. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è...');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è:', error);
                addLog('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error.message);
            }
        }
        
        // –ü—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ (–¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
        async function acceptCall(offerSdp) {
            isCaller = false;
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫
                await getLocalStream();
                
                // –°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
                createPeerConnection();
                
                // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö (–±—É–¥–µ—Ç –æ–∂–∏–¥–∞—Ç—å –æ—Ç –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞)
                createDataChannel();
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                const offer = JSON.parse(offerSdp);
                await peerConnection.setRemoteDescription(new RTCSessionDescription(offer));
                
                // –°–æ–∑–¥–∞–µ–º –æ—Ç–≤–µ—Ç
                const answer = await peerConnection.createAnswer();
                await peerConnection.setLocalDescription(answer);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
                const answerSdp = JSON.stringify(answer);
                alert(`–û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥—É (–æ—Ç–≤–µ—Ç/answer):\n\n${answerSdp}`);
                
                addLog('–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ. –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ –∑–≤–æ–Ω–∫–∞:', error);
                addLog('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }
        
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
        function sendMessage() {
            const text = messageInput.value.trim();
            
            if (!text || !dataChannel || dataChannel.readyState !== 'open') {
                return;
            }
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö
            const message = {
                sender: '–í—ã',
                text: text,
                timestamp: new Date().toLocaleTimeString()
            };
            
            dataChannel.send(JSON.stringify(message));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
            addChatMessage('–í—ã', text, 'sent');
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            messageInput.value = '';
            messageInput.focus();
        }
        
        // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
        function addChatMessage(sender, text, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            messageDiv.innerHTML = `
                <div class="message-info">${sender} ‚Ä¢ ${time}</div>
                ${text}
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        function updateConnectionStatus(connected) {
            if (connected) {
                connectionStatus.textContent = '‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ';
                connectionStatus.className = 'status connected';
            } else {
                connectionStatus.textContent = '‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ';
                connectionStatus.className = 'status disconnected';
            }
        }
        
        // –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –≤–∏–¥–µ–æ
        function toggleVideo() {
            if (!localStream) return;
            
            const videoTrack = localStream.getVideoTracks()[0];
            
            if (videoTrack) {
                if (videoTrack.enabled) {
                    videoTrack.enabled = false;
                    toggleVideoBtn.classList.remove('active');
                    toggleVideoBtn.innerHTML = '<span>üé•</span> –í–∫–ª. –≤–∏–¥–µ–æ';
                    addLog('–í–∏–¥–µ–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ');
                } else {
                    videoTrack.enabled = true;
                    toggleVideoBtn.classList.add('active');
                    toggleVideoBtn.innerHTML = '<span>üé•</span> –í—ã–∫–ª. –≤–∏–¥–µ–æ';
                    addLog('–í–∏–¥–µ–æ –≤–∫–ª—é—á–µ–Ω–æ');
                }
            }
        }
        
        // –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏–æ
        function toggleAudio() {
            if (!localStream) return;
            
            const audioTrack = localStream.getAudioTracks()[0];
            
            if (audioTrack) {
                if (audioTrack.enabled) {
                    audioTrack.enabled = false;
                    toggleAudioBtn.classList.remove('active');
                    toggleAudioBtn.innerHTML = '<span>üé§</span> –í–∫–ª. –∞—É–¥–∏–æ';
                    addLog('–ê—É–¥–∏–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ');
                } else {
                    audioTrack.enabled = true;
                    toggleAudioBtn.classList.add('active');
                    toggleAudioBtn.innerHTML = '<span>üé§</span> –í—ã–∫–ª. –∞—É–¥–∏–æ';
                    addLog('–ê—É–¥–∏–æ –≤–∫–ª—é—á–µ–Ω–æ');
                }
            }
        }
        
        // –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —ç–∫—Ä–∞–Ω–∞
        async function toggleScreenShare() {
            try {
                if (!isScreenSharing) {
                    // –ù–∞—á–∞—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —ç–∫—Ä–∞–Ω–∞
                    const screenStream = await navigator.mediaDevices.getDisplayMedia({ 
                        video: true,
                        audio: true 
                    });
                    
                    // –ó–∞–º–µ–Ω—è–µ–º –≤–∏–¥–µ–æ—Ç—Ä–µ–∫ –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
                    const screenTrack = screenStream.getVideoTracks()[0];
                    const sender = peerConnection.getSenders().find(s => 
                        s.track && s.track.kind === 'video'
                    );
                    
                    if (sender) {
                        sender.replaceTrack(screenTrack);
                    }
                    
                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π —Ç—Ä–µ–∫ –∏ –∑–∞–º–µ–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
                    localStream.getVideoTracks().forEach(track => track.stop());
                    localStream.removeTrack(localStream.getVideoTracks()[0]);
                    localStream.addTrack(screenTrack);
                    
                    isScreenSharing = true;
                    screenShareBtn.textContent = 'üñ•Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–∫—Ä–∞–Ω';
                    addLog('–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –Ω–∞—á–∞—Ç–∞');
                    
                } else {
                    // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞–º–µ—Ä–µ
                    const cameraStream = await navigator.mediaDevices.getUserMedia({ 
                        video: true,
                        audio: false 
                    });
                    
                    const cameraTrack = cameraStream.getVideoTracks()[0];
                    const sender = peerConnection.getSenders().find(s => 
                        s.track && s.track.kind === 'video'
                    );
                    
                    if (sender) {
                        sender.replaceTrack(cameraTrack);
                    }
                    
                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç–Ω—ã–π —Ç—Ä–µ–∫ –∏ –∑–∞–º–µ–Ω—è–µ–º
                    localStream.getVideoTracks().forEach(track => track.stop());
                    localStream.removeTrack(localStream.getVideoTracks()[0]);
                    localStream.addTrack(cameraTrack);
                    
                    isScreenSharing = false;
                    screenShareBtn.textContent = 'üñ•Ô∏è –≠–∫—Ä–∞–Ω';
                    addLog('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –∫–∞–º–µ—Ä—É');
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞:', error);
                addLog('–û—à–∏–±–∫–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞: ' + error.message);
            }
        }
        
        // –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫
        function endCall() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
            }
            
            if (peerConnection) {
                peerConnection.close();
            }
            
            if (dataChannel) {
                dataChannel.close();
            }
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç—ã
            localVideo.srcObject = null;
            remoteVideo.srcObject = null;
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
            appContainer.classList.add('hidden');
            setupPanel.classList.remove('hidden');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            isScreenSharing = false;
            screenShareBtn.textContent = 'üñ•Ô∏è –≠–∫—Ä–∞–Ω';
            
            addLog('–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω');
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω', 'system');
            updateConnectionStatus(false);
        }
        
        // –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function copyPeerId() {
            localPeerIdInput.select();
            document.execCommand('copy');
            addLog('ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
            alert('ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –¥—Ä—É–≥—É.');
        }
        
        // –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥
        function addLog(message) {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            
            logEntry.innerHTML = `
                <span class="log-time">[${time}]:</span>
                <span class="log-message"> ${message}</span>
            `;
            
            logs.appendChild(logEntry);
            logs.scrollTop = logs.scrollHeight;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', init);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
        window.acceptIncomingCall = function() {
            const offerSdp = prompt('–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –¥—Ä—É–≥–∞ (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ/offer):');
            if (offerSdp) {
                acceptCall(offerSdp);
            }
        };
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–Ω—è—Ç—å –∑–≤–æ–Ω–æ–∫" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        document.addEventListener('DOMContentLoaded', function() {
            const acceptBtn = document.createElement('button');
            acceptBtn.textContent = '–ü—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫';
            acceptBtn.className = 'secondary';
            acceptBtn.style.marginTop = '10px';
            acceptBtn.onclick = window.acceptIncomingCall;
            
            document.querySelector('.setup-panel').appendChild(acceptBtn);
        });
    </script>
</body>
</html>
